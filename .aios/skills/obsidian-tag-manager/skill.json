{
  "name": "obsidian-tag-manager",
  "version": "1.0.0",
  "description": "Gerenciamento inteligente de tags para vaults Obsidian com normalização automática e prevenção de duplicatas",
  "author": "AIOS Core",
  "category": "productivity",
  "tags": ["obsidian", "tags", "organization", "knowledge-management", "normalization"],
  "config": {
    "defaultVaultPath": "/Users/luizfosc/Library/Mobile Documents/iCloud~md~obsidian/Documents/Mente do Fosc",
    "vaultName": "Mente do Fosc",
    "syncProvider": "iCloud"
  },
  "activation": {
    "keywords": [
      "obsidian tags",
      "normalize tags",
      "tag duplicates",
      "organize obsidian",
      "vault tags",
      "frontmatter tags",
      "tag manager"
    ],
    "explicit": true
  },
  "capabilities": [
    "Extrair todas as tags existentes do vault Obsidian",
    "Normalizar capitalizações inconsistentes (TypeScript vs typescript)",
    "Detectar e resolver tags duplicadas",
    "Adicionar tags mantendo consistência com vault existente",
    "Suportar tags hierárquicas (projeto/backend/api)",
    "Validar estrutura de hierarquias",
    "Processar múltiplos arquivos em massa",
    "Auto-sugerir tags baseado em conteúdo",
    "Aplicar tags no formato YAML frontmatter",
    "Consolidar tags duplicadas em todo o vault"
  ],
  "requirements": {
    "tools": ["Grep", "Read", "Write", "Edit", "Bash", "Glob"],
    "permissions": ["file-read", "file-write", "command-execution"]
  },
  "workflow": [
    "1. Receber caminho do vault Obsidian",
    "2. Extrair tags existentes usando grep (#tag pattern)",
    "3. Criar mapa normalizado (lowercase → original)",
    "4. Processar solicitação do usuário",
    "5. Matching case-insensitive com preservação de original",
    "6. Aplicar tags no frontmatter YAML",
    "7. Validar YAML antes de escrever",
    "8. Reportar mudanças e estatísticas"
  ],
  "inputs": {
    "vaultPath": {
      "type": "string",
      "required": true,
      "description": "Caminho completo do vault Obsidian (ex: /Users/user/Documents/ObsidianVault)"
    },
    "operation": {
      "type": "string",
      "required": true,
      "enum": [
        "extract-tags",
        "add-tags",
        "normalize-tags",
        "list-duplicates",
        "consolidate-tag",
        "auto-tag",
        "validate-hierarchy",
        "organize-hierarchy"
      ],
      "description": "Operação a ser executada"
    },
    "targetFile": {
      "type": "string",
      "required": false,
      "description": "Arquivo alvo para operações específicas (add-tags, normalize-tags)"
    },
    "targetDirectory": {
      "type": "string",
      "required": false,
      "description": "Diretório alvo para operações em massa"
    },
    "tags": {
      "type": "array",
      "required": false,
      "description": "Lista de tags a adicionar/processar"
    },
    "oldTag": {
      "type": "string",
      "required": false,
      "description": "Tag antiga para consolidação/migração"
    },
    "newTag": {
      "type": "string",
      "required": false,
      "description": "Tag nova para consolidação/migração"
    }
  },
  "outputs": {
    "extractedTags": {
      "type": "object",
      "description": "Mapa de tags extraídas (normalized → original)"
    },
    "statistics": {
      "type": "object",
      "description": "Estatísticas: total tags, duplicatas, arquivos processados"
    },
    "modifiedFiles": {
      "type": "array",
      "description": "Lista de arquivos modificados"
    },
    "duplicates": {
      "type": "array",
      "description": "Lista de tags duplicadas detectadas"
    },
    "hierarchyValidation": {
      "type": "object",
      "description": "Resultado da validação de hierarquia"
    }
  },
  "commands": {
    "*extract-tags": {
      "description": "Lista todas as tags do vault",
      "params": [],
      "example": "*extract-tags"
    },
    "*add-tags": {
      "description": "Adiciona tags a um arquivo mantendo consistência",
      "params": ["file", "tags..."],
      "example": "*add-tags note.md react typescript hooks"
    },
    "*normalize-tags": {
      "description": "Normaliza tags de um arquivo específico",
      "params": ["file"],
      "example": "*normalize-tags note.md"
    },
    "*normalize-all": {
      "description": "Normaliza todos arquivos de um diretório",
      "params": ["directory"],
      "example": "*normalize-all docs/tutorials/"
    },
    "*list-duplicates": {
      "description": "Detecta e lista tags duplicadas",
      "params": [],
      "example": "*list-duplicates"
    },
    "*consolidate-tag": {
      "description": "Consolida tags duplicadas",
      "params": ["old-tags", "new-tag"],
      "example": "*consolidate-tag typescript,TYPESCRIPT TypeScript"
    },
    "*auto-tag": {
      "description": "Auto-tag baseado em conteúdo",
      "params": ["directory"],
      "example": "*auto-tag docs/tutorials/"
    },
    "*validate-hierarchy": {
      "description": "Valida estrutura de tags hierárquicas",
      "params": [],
      "example": "*validate-hierarchy"
    },
    "*organize-hierarchy": {
      "description": "Converte tags flat para hierárquicas",
      "params": [],
      "example": "*organize-hierarchy"
    },
    "*tree-view": {
      "description": "Visualiza hierarquia em formato árvore",
      "params": ["root-tag"],
      "example": "*tree-view projeto"
    },
    "*refresh-tags": {
      "description": "Atualiza cache de tags",
      "params": [],
      "example": "*refresh-tags"
    }
  },
  "conventions": {
    "capitalization": {
      "technologies": "PascalCase (TypeScript, React, Node.js)",
      "languages": "PascalCase (Python, JavaScript, Go)",
      "concepts": "lowercase (design-patterns, best-practices)",
      "categories": "lowercase (tutorial, documentation)",
      "projects": "PascalCase or kebab-case (AIOS, ecoflow-design-system)",
      "hierarchy": "maintains structure (projeto/backend)"
    },
    "format": {
      "frontmatter": "YAML multiline (one tag per line)",
      "separator": "/ for hierarchical tags",
      "ordering": "alphabetical",
      "prefix": "no # in frontmatter (Obsidian standard)"
    }
  },
  "examples": [
    {
      "title": "Adicionar tags mantendo consistência",
      "command": "/AIOS:skills:obsidian-tag-manager",
      "description": "Adiciona tags react, typescript a uma nota",
      "input": {
        "vaultPath": "/Users/user/Documents/Obsidian",
        "operation": "add-tags",
        "targetFile": "note.md",
        "tags": ["react", "typescript", "hooks"]
      },
      "expectedOutput": {
        "tags": ["React", "TypeScript", "hooks"],
        "normalized": 2,
        "new": 1
      }
    },
    {
      "title": "Detectar duplicatas no vault",
      "command": "/AIOS:skills:obsidian-tag-manager",
      "description": "Lista todas as tags duplicadas",
      "input": {
        "vaultPath": "/Users/user/Documents/Obsidian",
        "operation": "list-duplicates"
      },
      "expectedOutput": {
        "duplicates": [
          {
            "canonical": "TypeScript",
            "variations": ["typescript", "TYPESCRIPT"],
            "affectedNotes": 25
          }
        ]
      }
    },
    {
      "title": "Normalizar pasta inteira",
      "command": "/AIOS:skills:obsidian-tag-manager",
      "description": "Normaliza tags de todos arquivos em docs/",
      "input": {
        "vaultPath": "/Users/user/Documents/Obsidian",
        "operation": "normalize-tags",
        "targetDirectory": "docs/"
      },
      "expectedOutput": {
        "filesProcessed": 20,
        "tagsNormalized": 15,
        "errors": 0
      }
    }
  ],
  "references": [
    ".aios/skills/obsidian-tag-manager/README.md",
    ".aios/skills/obsidian-tag-manager/QUICK-REFERENCE.md",
    ".aios/skills/obsidian-tag-manager/examples/basic-usage.md",
    ".aios/skills/obsidian-tag-manager/examples/duplicate-resolution.md",
    ".aios/skills/obsidian-tag-manager/examples/bulk-operations.md",
    ".aios/skills/obsidian-tag-manager/examples/hierarchical-tags.md"
  ],
  "documentation": {
    "main": "skill.md",
    "quickStart": "README.md",
    "reference": "QUICK-REFERENCE.md",
    "examples": "examples/README.md"
  },
  "bestPractices": [
    "Sempre extrair tags existentes antes de adicionar novas",
    "Usar cache de sessão para evitar múltiplos scans",
    "Validar YAML antes de aplicar mudanças",
    "Fazer backup (git commit) antes de operações em massa",
    "Consolidar duplicatas regularmente",
    "Usar convenções de capitalização consistentes",
    "Processar incrementalmente (pasta por pasta)",
    "Revisar mudanças antes de aplicar em massa"
  ],
  "troubleshooting": {
    "tagsNotFound": "Verificar formato #tag no vault",
    "cacheStale": "Usar *refresh-tags para atualizar",
    "frontmatterCorrupt": "Validação YAML automática com rollback",
    "permissionDenied": "Verificar permissões de escrita no arquivo",
    "encodingIssues": "Forçar UTF-8 com iconv"
  }
}
