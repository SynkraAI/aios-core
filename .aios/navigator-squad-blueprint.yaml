# Navigator Squad - Design Blueprint
# Generated by @squad-creator (Craft) from @analyst (Atlas) brief
# Date: 2026-02-15

squad:
  name: navigator
  type: core-agent
  description: "Autonomous navigation agent for AIOS project management and orchestration"
  domain: project-navigation-orchestration
  version: 1.0.0
  author: Luiz Fosc

analysis:
  entities:
    - Project
    - Roadmap
    - Phase
    - Checkpoint
    - Status Report
    - Epic
    - Story
    - Agent
    - Pipeline

  workflows:
    - map-project-flow
    - detect-phase-flow
    - auto-navigation-flow
    - multi-chat-orchestration
    - checkpoint-creation
    - status-reporting
    - roadmap-sync

  integrations:
    - git (hooks, log, status)
    - AIOS agents (@analyst, @pm, @architect, etc)
    - File system (stories, epics, roadmap)
    - Session state

  stakeholders:
    - Project Manager
    - Development Team
    - Solo Developer

recommendations:
  agents:
    - id: navigator
      name: Vega
      title: Project Navigator
      icon: üß≠
      archetype: Cart√≥grafo
      zodiac: '‚ôê Sagittarius'
      role: "Autonomous project navigation and orchestration specialist"
      tone: experienced-guide
      vocabulary:
        - navegar
        - mapear
        - orientar
        - guiar
        - direcionar
        - rastrear
        - orquestrar
      signature_closing: "‚Äî Vega, navegando seu caminho üß≠"
      whenToUse: |
        Use para mapear roadmap de projetos novos, detectar fase atual em projetos existentes,
        retomar contexto perdido, orquestrar execu√ß√£o multi-agente, gerar relat√≥rios de progresso,
        e criar checkpoints de estado.

        NOT for: Implementa√ß√£o de c√≥digo ‚Üí Use @dev. Cria√ß√£o de PRDs ‚Üí Use @pm.
        Defini√ß√£o de arquitetura ‚Üí Use @architect.
      commands:
        # Mapping
        - name: map-project
          visibility: [full, quick, key]
          description: 'Mapear novo projeto (entrada h√≠brida)'
          task: nav-map-project.md

        # Navigation
        - name: where-am-i
          visibility: [full, quick, key]
          description: 'Detectar fase atual e pr√≥ximos passos'
          task: nav-where-am-i.md

        - name: resume-project
          visibility: [full, quick]
          args: '{name}'
          description: 'Retomar projeto existente'
          task: nav-resume-project.md

        - name: show-roadmap
          visibility: [full, quick, key]
          description: 'Visualizar roadmap completo'

        # Orchestration
        - name: auto-navigate
          visibility: [full, quick, key]
          description: 'Navega√ß√£o aut√¥noma (delega pr√≥ximo agente)'
          task: nav-auto-navigate.md

        - name: orchestrate
          visibility: [full, quick, key]
          args: '{epic}'
          description: 'Setup multi-chat orchestration'
          task: nav-orchestrate.md

        # Tracking
        - name: checkpoint
          visibility: [full, quick]
          description: 'Criar checkpoint manual de progresso'
          task: nav-checkpoint.md

        - name: status-report
          visibility: [full, quick]
          description: 'Gerar relat√≥rio de status completo'
          task: nav-status-report.md

        # Maintenance
        - name: update-roadmap
          visibility: [full]
          description: 'Atualizar roadmap manualmente'
          task: nav-update-roadmap.md

        # Utilities
        - name: help
          visibility: [full, quick, key]
          description: 'Show all available commands'

        - name: guide
          visibility: [full]
          description: 'Show comprehensive usage guide'

        - name: yolo
          visibility: [full]
          description: 'Toggle permission mode'

        - name: exit
          visibility: [full, quick, key]
          description: 'Exit navigator mode'

      confidence: 0.98
      user_added: false
      user_modified: false

  tasks:
    # PRIORITY 1: Core Navigation
    - name: nav-map-project
      agent: navigator
      description: "Map new project with hybrid input (free text + guided questions)"
      entrada:
        - project_description (text)
        - optional_domain_hint (text)
      saida:
        - roadmap_central (.aios/navigator/[project]/roadmap.md)
        - roadmap_local (docs/roadmap.md)
        - project_metadata (YAML)
      checklist:
        - "Collect project description (free text)"
        - "Analyze and extract key information"
        - "Ask complementary questions for gaps"
        - "Detect project type (greenfield/brownfield)"
        - "Determine complexity level"
        - "Map to pipeline phases"
        - "Generate roadmap from template"
        - "Sync to both locations"
      confidence: 0.95
      priority: 1

    - name: nav-where-am-i
      agent: navigator
      description: "Detect current phase and suggest next steps"
      entrada:
        - project_context (auto-detected)
        - stories_status (from docs/stories/)
        - git_status
      saida:
        - current_phase (phase_id)
        - progress_percentage (number)
        - next_steps (list)
        - blockers (list)
      checklist:
        - "Load project roadmap"
        - "Scan docs/stories/ for completed stories"
        - "Parse story front-matter YAML"
        - "Calculate phase completion %"
        - "Detect current phase from outputs"
        - "Identify blockers (missing inputs)"
        - "Suggest next agent/command"
        - "Display formatted status"
      confidence: 0.93
      priority: 1

    - name: nav-resume-project
      agent: navigator
      description: "Resume existing project with full context"
      entrada:
        - project_name (text)
      saida:
        - loaded_roadmap (object)
        - session_context (object)
        - next_action (command)
      checklist:
        - "List available projects (.aios/navigator/)"
        - "Load selected project roadmap"
        - "Run nav-where-am-i internally"
        - "Display project status"
        - "Offer quick actions (continue/review/restart)"
      confidence: 0.91
      priority: 1

    # PRIORITY 2: Sync & Detection
    - name: nav-update-roadmap
      agent: navigator
      description: "Update roadmap manually or auto-triggered"
      entrada:
        - trigger_type (manual|auto|hook)
        - changed_files (list)
      saida:
        - updated_roadmap (markdown)
        - sync_status (boolean)
      checklist:
        - "Detect changes in docs/stories/"
        - "Re-calculate phase status"
        - "Update metrics (velocity, commits)"
        - "Update Context Anchors"
        - "Sync central ‚Üî local"
        - "Create checkpoint if phase changed"
      scripts:
        - roadmap-sync.js
        - phase-detector.js
      confidence: 0.90
      priority: 2

    # PRIORITY 3: Orchestration
    - name: nav-auto-navigate
      agent: navigator
      description: "Autonomous navigation - delegate to next agent"
      entrada:
        - current_phase (detected)
        - pipeline_map (YAML)
      saida:
        - agent_activation (string)
        - command_executed (string)
        - context_passed (object)
      checklist:
        - "Detect current phase via nav-where-am-i"
        - "Load pipeline map YAML"
        - "Get next_phase from map"
        - "Identify required agent"
        - "Prepare agent context"
        - "Activate agent with command"
        - "Wait for completion or timeout"
        - "Create checkpoint on success"
      scripts:
        - phase-detector.js
        - orchestrator.js
      confidence: 0.88
      priority: 3

    - name: nav-orchestrate
      agent: navigator
      description: "Generate multi-chat orchestration prompts"
      entrada:
        - epic_id (text)
        - stories_in_epic (list)
      saida:
        - orchestration_plan (markdown)
        - chat_prompts (list of strings)
      checklist:
        - "Load epic and stories"
        - "Analyze story dependencies"
        - "Determine waves (parallel groups)"
        - "Generate coordinator prompt (@sm)"
        - "Generate dev prompts (wave 1, 2, 3)"
        - "Use orchestration template"
        - "Display ready-to-copy prompts"
      templates:
        - nav-orchestration-tmpl.md
      confidence: 0.87
      priority: 3

    # PRIORITY 4: Tracking
    - name: nav-checkpoint
      agent: navigator
      description: "Create checkpoint snapshot"
      entrada:
        - checkpoint_type (auto|manual)
        - phase_id (number)
      saida:
        - checkpoint_file (.aios/navigator/[project]/checkpoints/[date]-phase-[id].md)
      checklist:
        - "Get current phase and status"
        - "Collect completed stories"
        - "Collect modified files (git log)"
        - "Generate checkpoint from template"
        - "Save to checkpoints/"
        - "Update roadmap with checkpoint reference"
      templates:
        - nav-checkpoint-tmpl.md
      scripts:
        - checkpoint-manager.js
      confidence: 0.89
      priority: 4

    - name: nav-status-report
      agent: navigator
      description: "Generate status report (daily/weekly)"
      entrada:
        - report_type (daily|weekly|custom)
        - time_range (dates)
      saida:
        - report_file (.aios/navigator/[project]/reports/[date]-[type].md)
      checklist:
        - "Calculate metrics (stories, commits, velocity)"
        - "Identify blockers"
        - "List completed work"
        - "List pending work"
        - "Generate report from template"
        - "Save to reports/"
      templates:
        - nav-status-report-tmpl.md
      confidence: 0.86
      priority: 4

    # PRIORITY 5: Phase Detection (Internal)
    - name: nav-detect-phase
      agent: navigator
      description: "Internal task: detect current phase from file system"
      entrada:
        - project_root (path)
        - pipeline_map (YAML)
      saida:
        - current_phase (object)
        - completion_percentage (number)
      checklist:
        - "Load pipeline map"
        - "For each phase, check output files exist"
        - "Parse story status from front-matter"
        - "Calculate completion based on outputs"
        - "Return most advanced phase"
      scripts:
        - phase-detector.js
      confidence: 0.92
      priority: 5
      internal: true

  templates:
    - name: nav-roadmap-tmpl.md
      description: "Master roadmap template with all sections"
      sections:
        - overview
        - pipeline-table
        - current-phase-status
        - next-steps
        - checkpoints
        - context-anchors
        - metrics
        - blockers
      confidence: 0.96
      content_source: "Section 6 of brief (complete structure provided)"

    - name: nav-checkpoint-tmpl.md
      description: "Checkpoint snapshot template"
      sections:
        - checkpoint-metadata
        - completed-stories
        - modified-files
        - next-phase-preview
      confidence: 0.90

    - name: nav-status-report-tmpl.md
      description: "Status report template (daily/weekly)"
      sections:
        - report-header
        - metrics-summary
        - completed-work
        - pending-work
        - blockers
        - velocity-chart
      confidence: 0.88

    - name: nav-orchestration-tmpl.md
      description: "Multi-chat orchestration prompts"
      sections:
        - coordinator-prompt
        - dev-wave-1-prompt
        - dev-wave-2-prompt
        - dev-wave-3-prompt
        - execution-instructions
      confidence: 0.89

  scripts:
    - name: roadmap-sync.js
      description: "Synchronize roadmap between central and local"
      functions:
        - syncRoadmap(projectName)
        - detectConflicts()
        - resolveConflicts(strategy)
      confidence: 0.91

    - name: phase-detector.js
      description: "Detect current phase from file system"
      functions:
        - detectPhase(projectRoot, pipelineMap)
        - calculateCompletion(phase)
        - checkOutputs(phase)
      confidence: 0.93

    - name: checkpoint-manager.js
      description: "Manage checkpoint creation and retrieval"
      functions:
        - createCheckpoint(phase, type)
        - listCheckpoints(projectName)
        - loadCheckpoint(checkpointId)
      confidence: 0.87

    - name: orchestrator.js
      description: "Orchestrate multi-agent execution"
      functions:
        - delegateToAgent(agent, command, context)
        - generateMultiChatPrompts(epic)
        - trackAgentExecution(agentId)
      confidence: 0.85

  data:
    - name: navigator-pipeline-map.yaml
      description: "10-phase AIOS pipeline map with transitions"
      content_provided: true
      confidence: 1.0
      source: "Section 7 of brief (complete YAML provided)"

  hooks:
    - name: post-commit
      description: "Git hook for automatic roadmap updates"
      triggers:
        - "changes in docs/stories/*.md"
      actions:
        - "Run nav-update-roadmap with trigger=hook"
        - "Sync roadmaps"
        - "Create checkpoint if phase changed"
      location: .husky/post-commit
      confidence: 0.88

  config:
    template: agent-only
    config_mode: none
    persistence:
      central: .aios/navigator/[project-name]/
      local: docs/roadmap.md
      sync: bidirectional

metadata:
  created_at: "2026-02-15T00:00:00Z"
  created_by: "@squad-creator (Craft)"
  source_brief: ".aios/navigator-agent-brief.md"
  analyst: "@analyst (Atlas)"
  user_adjustments: 0
  overall_confidence: 0.91

  priority_phases:
    phase_1_core:
      - agent: navigator.md
      - tasks: [nav-map-project, nav-where-am-i, nav-resume-project]
      - templates: [nav-roadmap-tmpl.md]
      - data: [navigator-pipeline-map.yaml]

    phase_2_sync:
      - scripts: [roadmap-sync.js, phase-detector.js]
      - tasks: [nav-update-roadmap, nav-detect-phase]
      - hooks: [post-commit]

    phase_3_orchestration:
      - tasks: [nav-auto-navigate, nav-orchestrate]
      - scripts: [orchestrator.js]
      - templates: [nav-orchestration-tmpl.md]

    phase_4_tracking:
      - tasks: [nav-checkpoint, nav-status-report]
      - scripts: [checkpoint-manager.js]
      - templates: [nav-checkpoint-tmpl.md, nav-status-report-tmpl.md]

  implementation_notes: |
    This is NOT a traditional squad in /squads/ directory.
    This is a CORE AGENT that lives in .aios-core/development/.

    Location: .aios-core/development/agents/navigator.md

    All tasks, templates, scripts, and data go into .aios-core/development/
    following the standard AIOS structure.

  acceptance_criteria:
    must_have:
      - "[ ] Agent Navigator ativ√°vel via @navigator"
      - "[ ] *map-project funcional (entrada h√≠brida)"
      - "[ ] *where-am-i detecta fase corretamente"
      - "[ ] Roadmap sincroniza central ‚Üî local"
      - "[ ] Template roadmap completo"
      - "[ ] Pipeline map com 10 fases"
      - "[ ] Git hook post-commit funcional"

    should_have:
      - "[ ] *auto-navigate delega agentes"
      - "[ ] *orchestrate gera prompts multi-chat"
      - "[ ] Checkpoints autom√°ticos"
      - "[ ] Status reports autom√°ticos"

    nice_to_have:
      - "[ ] Dashboard visual (integra√ß√£o futura)"
      - "[ ] Notifica√ß√µes de mudan√ßa de fase"
      - "[ ] M√©tricas de velocity e burndown"
